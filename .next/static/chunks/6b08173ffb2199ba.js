(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37115,e=>{"use strict";e.s(["default",()=>s]);var r=e.i(43476),t=e.i(71645);async function a(e,r){let t=await fetch(e,r);if(!t.ok){let e="Request failed";try{let r=await t.json();r&&"string"==typeof r.error&&(e=r.error)}catch(r){try{let r=await t.text();r&&(e=r)}catch(e){}}throw Error(e)}try{return await t.json()}catch(e){return{}}}function s(){let[e,s]=(0,t.useState)(!1),[o,n]=(0,t.useState)([]),[l,i]=(0,t.useState)(null),[d,c]=(0,t.useState)([]),[u,b]=(0,t.useState)(""),[h,m]=(0,t.useState)(!1),[x,f]=(0,t.useState)(""),p=(0,t.useRef)(null),y=(0,t.useMemo)(()=>u.trim().length>0&&!!l,[u,l]);async function v(){let{session:e}=await a("/api/sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"Career Counseling Chat"})});n(r=>[e,...r]),i(e),c([])}async function g(){if(y){m(!0);try{let e=await fetch("/api/messages/stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:l.id,content:u})});if(!e.ok||!e.body){let r="Streaming response failed";try{let t=await e.text();t&&(r=t)}catch(e){}throw Error(r)}let r={id:"local-".concat(Date.now()),session_id:l.id,role:"user",content:u,created_at:new Date().toISOString()};c(e=>[...e,r]),b("");let t=e.body.getReader(),a=new TextDecoder("utf-8");for(f("");;){let{done:e,value:r}=await t.read();if(e)break;let s=a.decode(r,{stream:!0});f(e=>e+s)}}finally{m(!1)}}}return(0,t.useEffect)(()=>{s(!0),(async()=>{try{let{session:e}=await a("/api/sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"Career Counseling Chat"})});i(e),n([e]),c([])}catch(e){console.error(e)}})()},[]),(0,t.useEffect)(()=>{l&&c([])},[l]),(0,t.useEffect)(()=>{var e;null==(e=p.current)||e.scrollIntoView({behavior:"smooth"})},[d]),(0,r.jsxs)("div",{className:"min-h-dvh flex bg-[var(--background)] text-[var(--foreground)]",children:[(0,r.jsx)("aside",{className:"hidden",style:{borderColor:"var(--border)",background:"var(--card)"}}),(0,r.jsxs)("main",{className:"flex-1 flex flex-col min-h-dvh",children:[(0,r.jsxs)("header",{className:"p-4 border-b flex items-center justify-between gap-4",style:{borderColor:"var(--border)",background:"var(--card)"},children:[(0,r.jsx)("div",{className:"font-semibold",children:l?l.title:"Preparing session..."}),(0,r.jsx)("div",{className:"flex items-center gap-2 min-w-0",children:(0,r.jsx)("button",{onClick:v,className:"text-sm border rounded px-2 py-1 hover:bg-[var(--muted)]",children:"New"})})]}),(0,r.jsxs)("section",{className:"flex-1 overflow-y-auto p-4 space-y-3 pb-24",style:{background:"var(--background)"},children:[!l&&(0,r.jsx)("div",{className:"text-neutral-500",children:"Preparing a new sessionâ€¦"}),d.map(e=>(0,r.jsxs)("div",{className:"max-w-[80ch]",children:[(0,r.jsx)("div",{className:"text-xs text-neutral-500 mb-1",children:"user"===e.role?"You":"Assistant"}),(0,r.jsx)("div",{className:"whitespace-pre-wrap rounded p-3 ".concat("user"===e.role?"bg-blue-50 border border-blue-100":"bg-[var(--muted)] border"),style:{borderColor:"user"===e.role?"#bfdbfe":"var(--border)"},children:e.content})]},e.id)),x&&(0,r.jsxs)("div",{className:"max-w-[80ch]",children:[(0,r.jsx)("div",{className:"text-xs text-neutral-500 mb-1",children:"Assistant"}),(0,r.jsx)("div",{className:"whitespace-pre-wrap rounded p-3 bg-[var(--muted)] border",style:{borderColor:"var(--border)"},children:x})]}),(0,r.jsx)("div",{ref:p})]}),(0,r.jsx)("footer",{className:"p-4 border-t fixed bottom-0 left-0 right-0 z-10",style:{borderColor:"var(--border)",background:"var(--card)"},children:(0,r.jsx)("div",{className:"mx-auto w-full max-w-screen-xl",children:(0,r.jsxs)("div",{className:"flex gap-2 w-full items-end px-4 md:px-0",children:[(0,r.jsx)("input",{value:u,onChange:e=>b(e.target.value),placeholder:l?"Type your message...":"Preparing session...",className:"flex-1 min-w-0 border rounded px-3 py-2",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),g())}}),(0,r.jsx)("button",{disabled:!y||h,onClick:g,className:"border rounded px-4 py-2 disabled:opacity-50",style:{background:"var(--accent)",color:"var(--accent-foreground)",borderColor:"var(--accent)"},children:h?"Sending...":"Send"})]})})})]})]})}}]);