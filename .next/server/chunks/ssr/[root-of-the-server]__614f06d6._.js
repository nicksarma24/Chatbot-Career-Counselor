module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},12692,a=>{"use strict";a.s(["default",()=>e]);var b=a.i(87924),c=a.i(72131);async function d(a,b){let c=await fetch(a,b);if(!c.ok){let a="Request failed";try{let b=await c.json();b&&"string"==typeof b.error&&(a=b.error)}catch{try{let b=await c.text();b&&(a=b)}catch{}}throw Error(a)}try{return await c.json()}catch{return{}}}function e(){let[a,e]=(0,c.useState)(!1),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(""),r=(0,c.useRef)(null),s=(0,c.useMemo)(()=>l.trim().length>0&&!!h,[l,h]);async function t(){let{session:a}=await d("/api/sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"Career Counseling Chat"})});g(b=>[a,...b]),i(a),k([])}async function u(){if(s){o(!0);try{let a=await fetch("/api/messages/stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:h.id,content:l})});if(!a.ok||!a.body){let b="Streaming response failed";try{let c=await a.text();c&&(b=c)}catch{}throw Error(b)}let b={id:`local-${Date.now()}`,session_id:h.id,role:"user",content:l,created_at:new Date().toISOString()};k(a=>[...a,b]),m("");let c=a.body.getReader(),d=new TextDecoder("utf-8");for(q("");;){let{done:a,value:b}=await c.read();if(a)break;let e=d.decode(b,{stream:!0});q(a=>a+e)}}finally{o(!1)}}}return(0,c.useEffect)(()=>{e(!0),(async()=>{try{let{session:a}=await d("/api/sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"Career Counseling Chat"})});i(a),g([a]),k([])}catch(a){console.error(a)}})()},[]),(0,c.useEffect)(()=>{h&&k([])},[h]),(0,c.useEffect)(()=>{r.current?.scrollIntoView({behavior:"smooth"})},[j]),(0,b.jsxs)("div",{className:"min-h-dvh flex bg-[var(--background)] text-[var(--foreground)]",children:[(0,b.jsx)("aside",{className:"hidden",style:{borderColor:"var(--border)",background:"var(--card)"}}),(0,b.jsxs)("main",{className:"flex-1 flex flex-col min-h-dvh",children:[(0,b.jsxs)("header",{className:"p-4 border-b flex items-center justify-between gap-4",style:{borderColor:"var(--border)",background:"var(--card)"},children:[(0,b.jsx)("div",{className:"font-semibold",children:h?h.title:"Preparing session..."}),(0,b.jsx)("div",{className:"flex items-center gap-2 min-w-0",children:(0,b.jsx)("button",{onClick:t,className:"text-sm border rounded px-2 py-1 hover:bg-[var(--muted)]",children:"New"})})]}),(0,b.jsxs)("section",{className:"flex-1 overflow-y-auto p-4 space-y-3 pb-24",style:{background:"var(--background)"},children:[!h&&(0,b.jsx)("div",{className:"text-neutral-500",children:"Preparing a new sessionâ€¦"}),j.map(a=>(0,b.jsxs)("div",{className:"max-w-[80ch]",children:[(0,b.jsx)("div",{className:"text-xs text-neutral-500 mb-1",children:"user"===a.role?"You":"Assistant"}),(0,b.jsx)("div",{className:`whitespace-pre-wrap rounded p-3 ${"user"===a.role?"bg-blue-50 border border-blue-100":"bg-[var(--muted)] border"}`,style:{borderColor:"user"===a.role?"#bfdbfe":"var(--border)"},children:a.content})]},a.id)),p&&(0,b.jsxs)("div",{className:"max-w-[80ch]",children:[(0,b.jsx)("div",{className:"text-xs text-neutral-500 mb-1",children:"Assistant"}),(0,b.jsx)("div",{className:"whitespace-pre-wrap rounded p-3 bg-[var(--muted)] border",style:{borderColor:"var(--border)"},children:p})]}),(0,b.jsx)("div",{ref:r})]}),(0,b.jsx)("footer",{className:"p-4 border-t fixed bottom-0 left-0 right-0 z-10",style:{borderColor:"var(--border)",background:"var(--card)"},children:(0,b.jsx)("div",{className:"mx-auto w-full max-w-screen-xl",children:(0,b.jsxs)("div",{className:"flex gap-2 w-full items-end px-4 md:px-0",children:[(0,b.jsx)("input",{value:l,onChange:a=>m(a.target.value),placeholder:h?"Type your message...":"Preparing session...",className:"flex-1 min-w-0 border rounded px-3 py-2",onKeyDown:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),u())}}),(0,b.jsx)("button",{disabled:!s||n,onClick:u,className:"border rounded px-4 py-2 disabled:opacity-50",style:{background:"var(--accent)",color:"var(--accent-foreground)",borderColor:"var(--accent)"},children:n?"Sending...":"Send"})]})})})]})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__614f06d6._.js.map